import{j as e,X as s,a0 as a,a as n}from"./ui-vendor-NJW5rtDU.js";import{r}from"./react-vendor-7nhe2WMs.js";import{P as o,b as i,B as l,c as t,d,e as c,C as u,f as p,h as m,i as h,j as x,k as j}from"./index-DR4W6oDl.js";function f({businesses:f,selectedIds:g,onSelectionChange:v,placeholder:b="Select businesses...",className:w,disabled:N=!1}){const[y,C]=r.useState(!1),[k,S]=r.useState(""),D=r.useMemo(()=>{if(!k)return f;const e=k.toLowerCase();return f.filter(s=>{var a;return s.name.toLowerCase().includes(e)||(null==(a=s.description)?void 0:a.toLowerCase().includes(e))})},[f,k]),P=r.useMemo(()=>f.filter(e=>g.includes(e.id)),[f,g]),M=(e,s)=>{s.preventDefault(),s.stopPropagation(),v(g.filter(s=>s!==e))};return e.jsxs(o,{open:y,onOpenChange:C,children:[e.jsx(i,{asChild:!0,children:e.jsxs(l,{variant:"outline",role:"combobox","aria-expanded":y,className:t("w-full justify-between min-h-[42px] h-auto",!g.length&&"text-muted-foreground",w),disabled:N,children:[e.jsx("div",{className:"flex flex-wrap gap-1 flex-1",children:0===P.length?e.jsx("span",{children:b}):P.map(a=>e.jsxs(d,{variant:"secondary",className:"mr-1 mb-1 cursor-pointer",onClick:e=>M(a.id,e),onMouseDown:e=>e.stopPropagation(),children:[a.name,e.jsx("span",{role:"button",tabIndex:0,className:"ml-1 rounded-full hover:bg-secondary-foreground/20 inline-flex items-center justify-center p-0.5",onClick:e=>M(a.id,e),onMouseDown:e=>e.stopPropagation(),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),M(a.id,e))},children:e.jsx(s,{className:"h-3 w-3"})})]},a.id))}),e.jsx(a,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(c,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsxs(u,{children:[e.jsx(p,{placeholder:"Search businesses...",value:k,onValueChange:S}),e.jsxs(m,{children:[e.jsx(h,{children:"No businesses found."}),e.jsx(x,{children:D.map(s=>{const a=g.includes(s.id);return e.jsxs(j,{value:s.id,onSelect:()=>{return e=s.id,void(g.includes(e)?v(g.filter(s=>s!==e)):v([...g,e]));var e},className:"cursor-pointer",children:[e.jsx(n,{className:t("mr-2 h-4 w-4",a?"opacity-100":"opacity-0")}),e.jsx("span",{className:"flex-1",children:s.name})]},s.id)})})]})]})})]})}export{f as B};
